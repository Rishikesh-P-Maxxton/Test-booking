<div class="container">
    <div class="this">
     <app-new-rooms-filter></app-new-rooms-filter>   
    </div>
    

    <!-- Filter and Sorting Section -->
    <div class="filter-sort-container mb-3 col-6-md">
      <input type="text" [(ngModel)]="filterTerm" (input)="applyFilter()" class="form-control mb-2"
             placeholder="Search by customer name, room ID, or status" />
  
      <div class="sort-buttons">
        <button (click)="sortBy('reservationId')" class="btn-custom-quo btn-sm">Sort by Reservation ID</button>
        <button (click)="sortBy('totalPrice')" class="btn-custom-quo btn-sm">Sort by Total Price</button>
        <button (click)="sortBy('arrivalDate')" class="btn-custom-quo btn-sm">Sort by Stay From</button>
      </div>
    </div>
  
    <!-- Reservation List Table -->
    <div *ngIf="filteredReservations.length === 0">No reservations found.</div>
    <table *ngIf="filteredReservations.length > 0" class="table">
      <thead class="thead-light">
        <tr>
          <th>Reservation ID</th>
          <th>Room ID</th>
          <th>Stay From</th>
          <th>Stay To</th>
          <th>Total Guests</th>
          <th>Total Price</th>
          <th>Customer Name</th>
          <th>Status</th>
          <th>Paid Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let reservation of filteredReservations; let i = index"
            [ngClass]="{
              'status-confirmed': reservation.reservation.status === 'CONFIRM',
              'status-checked-in': reservation.reservation.status === 'CHECKED-IN',
              'status-checked-out': reservation.reservation.status === 'CHECKED-OUT'
            }"
            class="table-row"
            [ngStyle]="{'--animation-delay': i * 0.2 + 's'}">
          <td>{{ reservation.reservation.reservationId }}</td>
          <td>{{ reservation.reservation.roomId }}</td>
          <td>{{ reservation.reservation.arrivalDate }}</td>
          <td>{{ reservation.reservation.departureDate }}</td>
          <td>{{ reservation.reservation.numberOfGuest }}</td>
          <td>{{ reservation.reservation.totalPrice }}</td>
          <td>{{ reservation.customer.firstName }} {{ reservation.customer.middleName }} {{ reservation.customer.lastName }}</td>
          <td>
            <select [(ngModel)]="reservation.reservation.status" (change)="updateStatus(reservation)">
              <option value="CONFIRM">Confirm</option>
              <option value="CHECKED-IN">Checked-In</option>
              <option value="CHECKED-OUT">Checked-Out</option>
            </select>
          </td>
          <td>{{ reservation.reservation.paidAmount }}</td>
        </tr>
      </tbody>
    </table>
  
    <!-- Clear Reservations and Download Buttons -->
    <div class="container mt-4">
      
      <button class="btn-custom-sec ms-2" *ngIf="filteredReservations.length !== 0" (click)="downloadPDF()">Download as PDF</button>
    </div>
  </div>
  